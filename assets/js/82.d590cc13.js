(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{440:function(a,t,s){"use strict";s.r(t);var e=s(45),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"第一步-使用-yarn-初始化项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-使用-yarn-初始化项目"}},[a._v("#")]),a._v(" 第一步 使用 yarn 初始化项目")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('$ yarn global add @umijs/create-umi-app\n...\nsuccess Installed "@umijs/create-umi-app@3.0.16" with binaries:\n      - create-umi-app\n')])])]),s("p",[a._v("@umijs/create-umi-app 主要是用来使用命令行创建 umi 相关的库或者项目。命令中打印 success 说明安装成功，如果你还需要进一步确认，可以执行 "),s("code",[a._v("create-umi-app -v")]),a._v(" 来查看 @umijs/create-umi-app 的版本号。")]),a._v(" "),s("h2",{attrs:{id:"第二步-使用-create-umi-app-新建项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-使用-create-umi-app-新建项目"}},[a._v("#")]),a._v(" 第二步 使用 create-umi-app 新建项目")]),a._v(" "),s("p",[a._v("先找个地方建个空目录")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ mkdir myapp && cd myapp\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ create-umi-app\nCopy:  .editorconfig\nWrite: .gitignore\nCopy:  .prettierignore\nCopy:  .prettierrc\nWrite: .umirc.ts\nCopy:  mock/.gitkeep\nWrite: package.json\nCopy:  README.md\nCopy:  src/pages/index.less\nCopy:  src/pages/index.tsx\nCopy:  tsconfig.json\nCopy:  typings.d.ts\n")])])]),s("p",[a._v("如果你的命令行打印的日志如上，说明新建项目完成了，如果有其他的错误，可以确认一下当前目录下是否为空。")]),a._v(" "),s("p",[a._v("以上两部也可以合并成一步，在一个空文件夹下面，执行 "),s("code",[a._v("yarn create @umijs/umi-app")])]),a._v(" "),s("h2",{attrs:{id:"第三步-安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-安装依赖"}},[a._v("#")]),a._v(" 第三步 安装依赖")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ yarn \n...这个过程需要一些时间\nsuccess Saved lockfile.\n✨  Done in 170.43s.\n")])])]),s("p",[a._v("看到命令行打印 success，一般就是安装成功了，但是有时候因为一些网络问题，会出现丢包的情况，需要你重新运行 "),s("code",[a._v("yarn")]),a._v(" 验证是否全部安装成功。")]),a._v(" "),s("h2",{attrs:{id:"第四步-启动开发服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四步-启动开发服务器"}},[a._v("#")]),a._v(" 第四步 启动开发服务器")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ yarn start\n$ umi dev\nStarting the development server...\n\n✔ Webpack\n  Compiled successfully in 7.21s\n\n DONE  Compiled successfully in 7216ms                                  14:51:34\n\n\n  App running at:\n  - Local:   http://localhost:8000 (copied to clipboard)\n  - Network: http://192.168.10.6:8000\n")])])]),s("p",[a._v("你可以通过浏览器访问 http://localhost:8000/ 来查看页面：")]),a._v(" "),s("h2",{attrs:{id:"错误说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误说明"}},[a._v("#")]),a._v(" 错误说明")]),a._v(" "),s("p",[a._v("如果，你的表现和上面的不同，你可以通过比对下面两个情况来修正。")]),a._v(" "),s("p",[a._v("\\1. 打印如下")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("? message Probably:\n  /usr/local/bin/node /Users/xiaohuoni/Documents/***/***/node_module\ns/umi/lib/scripts/realDev.js dev (pid 928)\n  in /Users/xiaohuoni/***/***/\n\nWould you like to run the app on another port instead? (Y/n)\n")])])]),s("p",[a._v("这个问题可能是因为你的其他项目或应用已经占用了 umi 默认的 8000 端口，你只要输入 Y 并回车，umi 将在另一个空闲端口上启动服务，最终访问路径以输出日志为准。")]),a._v(" "),s("p",[a._v("2.提示'create-umi-app' 不是内部或外部命令，也不是可运行的程序或批处理文件。")]),a._v(" "),s("p",[a._v("需要将 yarn 的 bin 加到环境变量里面。")]),a._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[a._v("其他情况")])]),a._v(" "),s("ul",[s("li",[s("p",[a._v("可能是 Node.js 版本问题引起的，确认一下你的开发环境。")])]),a._v(" "),s("li",[s("p",[a._v("网络问题引起部分依赖安装失败，可能需要科学上网，或者使用国内源，例如 "),s("a",{attrs:{href:"http://npm.taobao.org/package/tyarn",target:"_blank",rel:"noopener noreferrer"}},[a._v("tyarn"),s("OutboundLink")],1),a._v("。")])])]),a._v(" "),s("h1",{attrs:{id:"umi官方使用教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#umi官方使用教程"}},[a._v("#")]),a._v(" umi官方使用教程")]),a._v(" "),s("h2",{attrs:{id:"环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("p",[a._v("首先得有 "),s("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[a._v("node"),s("OutboundLink")],1),a._v("，并确保 node 版本是 10.13 或以上。（mac 下推荐使用 "),s("a",{attrs:{href:"https://github.com/creationix/nvm",target:"_blank",rel:"noopener noreferrer"}},[a._v("nvm"),s("OutboundLink")],1),a._v(" 来管理 node 版本）")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ node -v\nv10.13.0\n")])])]),s("p",[a._v("推荐使用 yarn 管理 npm 依赖，并"),s("a",{attrs:{href:"https://github.com/yiminghe/tyarn",target:"_blank",rel:"noopener noreferrer"}},[a._v("使用国内源"),s("OutboundLink")],1),a._v("（阿里用户使用内网源）。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 国内源$ npm i yarn tyarn -g# 后面文档里的 yarn 换成 tyarn$ tyarn -v")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 阿里内网源$ tnpm i yarn @ali/yarn -g# 后面文档里的 yarn 换成 ayarn$ ayarn -v")]),a._v("\n")])])]),s("h2",{attrs:{id:"脚手架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#脚手架"}},[a._v("#")]),a._v(" 脚手架")]),a._v(" "),s("p",[a._v("先找个地方建个空目录。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" myapp "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" myapp\n")])])]),s("p",[a._v("通过官方工具创建项目，")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" create @umijs/umi-app"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或 npx @umijs/create-umi-app")]),a._v("\nCopy:  .editorconfigWrite: .gitignoreCopy:  .prettierignoreCopy:  .prettierrcWrite: .umirc.tsCopy:  mock/.gitkeepWrite: package.jsonCopy:  README.mdCopy:  src/pages/index.lessCopy:  src/pages/index.tsxCopy:  tsconfig.jsonCopy:  typings.d.ts\n")])])]),s("h2",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[a._v("#")]),a._v(" 安装依赖")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" v1.21.1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("/4"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 🔍  Resolving packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".success Already up-to-date.\n")])])]),s("h2",{attrs:{id:"启动项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动项目"}},[a._v("#")]),a._v(" 启动项目")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" start\nStarting the development server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n✔ Webpack  Compiled successfully "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(".84s\n DONE  Compiled successfully "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" 17842ms                                       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(":06:31 PM\n\n  App running at:  - Local:   http://localhost:8000 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("copied to clipboard"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("  - Network: http://192.168.12.34:8000\n")])])]),s("h2",{attrs:{id:"修改配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改配置"}},[a._v("#")]),a._v(" 修改配置")]),a._v(" "),s("p",[a._v("默认的脚手架内置了 @umijs/preset-react，包含布局、权限、国际化、dva、简易数据流等常用功能。比如想要 ant-design-pro 的布局，编辑 "),s("code",[a._v(".umirc.ts")]),a._v(" 配置 "),s("code",[a._v("layout: {}")]),a._v("，并且需要安装 "),s("code",[a._v("@ant-design/pro-layout")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-diff extra-class"},[s("pre",{pre:!0,attrs:{class:"language-diff"}},[s("code",[a._v("import { defineConfig } from 'umi';\nexport default defineConfig({+ layout: {},  routes: [    { path: '/', component: '@/pages/index' },  ],});\n")])])]),s("p",[a._v("不用重启 "),s("code",[a._v("yarn start")]),a._v("，webpack 会在背后增量编译，过一会就可以看到以下界面，")]),a._v(" "),s("h2",{attrs:{id:"部署发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署发布"}},[a._v("#")]),a._v(" 部署发布")]),a._v(" "),s("h3",{attrs:{id:"构建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建"}},[a._v("#")]),a._v(" 构建")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build\n✔ Webpack  Compiled successfully "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("17")]),a._v(".17s\n DONE  Compiled successfully "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("in")]),a._v(" 17167ms                                       "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v(":26:25 PM\nBuild success.\n")])])]),s("p",[a._v("构建产物默认生成到 "),s("code",[a._v("./dist")]),a._v(" 下，然后通过 tree 命令查看，")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("tree ./dist\n./dist├── index.html├── umi.css└── umi.js\n")])])]),s("h3",{attrs:{id:"本地验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地验证"}},[a._v("#")]),a._v(" 本地验证")]),a._v(" "),s("p",[a._v("发布之前，可以通过 "),s("code",[a._v("serve")]),a._v(" 做本地验证，")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" global "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),a._v(" serve$ serve ./dist\n Serving"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n - Local:            http://localhost:5000\n - On Your Network:  http://192.168.12.34:5000\n Copied "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("local")]),a._v(" address to clipboard"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n")])])]),s("p",[a._v("访问 "),s("a",{attrs:{href:"http://localhost:5000/",target:"_blank",rel:"noopener noreferrer"}},[a._v("http://localhost:5000"),s("OutboundLink")],1),a._v("，正常情况下应该是和执行 "),s("code",[a._v("yarn start")]),a._v(" 时是一致的。")]),a._v(" "),s("h3",{attrs:{id:"部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[a._v("#")]),a._v(" 部署")]),a._v(" "),s("p",[a._v("本地验证完，就可以部署了。你需要把 "),s("code",[a._v("dist")]),a._v(" 目录部署到服务器上。")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://umijs.org/zh-CN/docs/directory-structure",target:"_blank",rel:"noopener noreferrer"}},[a._v("Umi基础"),s("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);